(this["webpackJsonpvg-sfx-quiz"]=this["webpackJsonpvg-sfx-quiz"]||[]).push([[0],{43:function(e,n,t){},44:function(e,n,t){},45:function(e,n,t){},46:function(e,n,t){},47:function(e,n,t){},48:function(e,n,t){},49:function(e,n,t){"use strict";t.r(n);var c,i=t(1),r=t.n(i),o=t(18),a=t.n(o),u=t(5),s=t(8),d=t(3),l=function(e){e instanceof DOMException&&e.message.indexOf("pause()")>-1?console.error(e):window.alert("Network error: No response. Try again.")},h=function(){var e=new Audio;return{playAudio:function(n){e.pause(),(e=new Audio("".concat("/api/sounds/").concat(n,".mp3"))).volume=.8,e.play().catch(l)}}}(),b=t(7),j=t.n(b),f={fetchSounds:function(e,n){return j.a.get("/api/sounds").then((function(e){return e.data})).then((function(t){return n(e(t))})).catch((function(e){window.alert("Network error: No response. Try reloading the page.")}))},checkAnswer:function(e,n,t){return j.a.post("/api/sounds/".concat(e,"/answer"),{answer:n}).then((function(e){return e.data})).then(t).catch((function(e){window.alert("Network error: No response. Try again.")}))},giveUp:function(e){return j.a.post("/api/give-up",{}).then((function(e){return e.data})).then(e).catch((function(e){window.alert("Network error: No response. Try again.")}))}},p=t(19),g=t(0),m=function(e){var n=e.id,t=e.playAudio,c=r.a.createRef();return Object(g.jsx)("button",{ref:c,onClick:function(){c.current.blur(),t(n)},children:Object(g.jsx)(p.a,{size:20})})},A=function(e){var n=e.sound,t=e.handleCheck,r=Object(i.useState)(""),o=Object(d.a)(r,2),a=o[0],u=o[1];return Object(g.jsx)("input",{className:function(e){return e.loading?"Quiz-input--loading":e.correct?"Quiz-input--correct":e.game?"Quiz-input--spoiler":void 0}(n),type:"text",maxLength:40,value:n.game||a,onChange:function(e){var i,r,o=e.target.value||"";u(o),i=function(){var e;(e=o.trim()).length>0&&t(n.id,e)},r=200,clearTimeout(c),c=setTimeout(i,r)},disabled:null!==n.game,placeholder:"Input answer... "})},x=(t(43),function(e){var n=e.index,t=e.sound,c=e.playAudio,i=e.handleCheck;return Object(g.jsxs)("div",{className:"Quiz-element",children:[Object(g.jsx)(m,{id:t.id,playAudio:c,correct:t.correct}),Object(g.jsx)(A,{sound:t,handleCheck:i}),Object(g.jsx)("span",{className:"Quiz-element-index",children:n})]})}),w=function(e){var n=e.sounds,t=e.playAudio,c=e.handleCheck;return Object(g.jsxs)("section",{className:"Quiz-main",children:[0===n.length&&Object(g.jsx)("p",{children:"Loading..."}),n.map((function(e,n){return Object(g.jsx)(x,{index:n+1,sound:e,playAudio:t,handleCheck:c},e.id)}))]})},O=(t(44),function(e,n){var t=Math.round(e/n*100);switch(!0){case t>99:return"fantastic";case t>75:return"excellent";case t>50:return"great";case t>25:return"decent";case t>15:return"way-off";default:return"miss"}}),N=function(e){var n=e.score,t=e.max,c=e.visible,i=e.fixed;return Object(g.jsxs)("div",{className:"Quiz-score-wrapper ".concat(i?"Quiz-score-wrapper--fixed":""," ").concat(c?"Quiz-score-wrapper--hidden":""),children:["Score:",Object(g.jsx)("span",{className:"Quiz-score Quiz-score--".concat(O(n,t)),children:n})," ","/ ",t]})},v=(t(45),function(e){var n=e.score,t=e.max,c=Object(i.useState)(!0),o=Object(d.a)(c,2),a=o[0],u=o[1],s=r.a.createRef(),l=function(){if(null!=s.current){var e=s.current.getBoundingClientRect().top;u(e+47<=window.innerHeight)}};return Object(i.useEffect)((function(){return l(),window.onscroll=l,function(){window.onscroll=null}})),Object(g.jsxs)("div",{className:"Quiz-footer",ref:s,children:[Object(g.jsx)(N,{clazz:"Quiz-score-fixed",score:n,max:t,fixed:!0,visible:a}),Object(g.jsx)(N,{score:n,max:t}),Object(g.jsx)("div",{className:"Quiz-footer-text",children:Object(g.jsxs)("p",{children:["Source code available at"," ",Object(g.jsx)("a",{href:"https://www.github.com/terohuomo/vg-sfx-quiz",children:"Github"})," ",Object(g.jsx)("img",{width:16,className:"Quiz-footer-icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RERCMUIwOUY4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RERCMUIwOUU4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTJBOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTJCOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+jUqS1wAAApVJREFUeNq0l89rE1EQx3e3gVJoSPzZeNEWPKgHoa0HBak0iHiy/4C3WvDmoZ56qJ7txVsPQu8qlqqHIhRKJZceesmhioQEfxTEtsoSpdJg1u/ABJ7Pmc1m8zLwgWTmzcw3L+/te+tHUeQltONgCkyCi2AEDHLsJ6iBMlgHL8FeoqokoA2j4CloRMmtwTmj7erHBXPgCWhG6a3JNXKdCiDl1cidVbXZkJoXQRi5t5BrxwoY71FzU8S4JuAIqFkJ2+BFSlEh525b/hr3+k/AklDkNsf6wTT4yv46KIMNpsy+iMdMc47HNWxbsgVcUn7FmLAzzoFAWDsBx+wVP6bUpp5ewI+DOeUx0Wd9D8F70BTGNjkWtqnhmT1JQAHcUgZd8Lo3rQb1LAT8eJVUfgGvHQigGp+V2Z0iAUUl8QH47kAA1XioxIo+bRN8OG8F/oBjwv+Z1nJgX5jpdzQDw0LCjsPmrcW7I/iHScCAEDj03FtD8A0EyuChHgg4KTlJQF3wZ7WELppnBX+dBFSVpJsOBWi1qiRgSwnOgoyD5hmuJdkWCVhTgnTvW3AgYIFrSbZGh0UW/Io5Vp+DQoK7o80pztWMemZbgxeNwCNwDbw1fIfgGZjhU6xPaJgBV8BdsMw5cbZoHsenwYFxkZzl83xTSKTiviCAfCsJLysH3POfC8m8NegyGAGfLP/VmGmfSChgXroR0RSWjEFv2J/nG84cuKFMf4sTCZqXuJd4KaXFVjEG3+tw4eXbNK/YC9oXXs3O8NY8y99L4BXY5cvLY/Bb2VZ58EOJVcB18DHJq9lRsKr8inyKGVjlmh29mtHs3AHfuhCwy1vXT/Nu2GKQt+UHsGdctyX6eQyNvc+5sfX9Dl7Pe2J/BRgAl2CpwmrsHR0AAAAASUVORK5CYII=",alt:"github icon"})]})})]})}),k=(t(46),null),T=function(e){var n=e.onClick,t=e.isDisabled,c=function(){k=setTimeout(n,1500)},i=function(){clearTimeout(k)};return Object(g.jsx)("div",{className:"Quiz-wrapper",children:Object(g.jsxs)("button",{className:"Quiz-giveup-button",onMouseDown:c,onMouseUp:i,onTouchStart:c,onTouchEnd:i,disabled:t,children:[Object(g.jsx)("b",{children:"Press and hold"})," for spoilers"]})})},z=(t(47),function(){var e=Object(i.useState)([]),n=Object(d.a)(e,2),t=n[0],c=n[1],r=Object(i.useState)(!1),o=Object(d.a)(r,2),a=o[0],l=o[1];Object(i.useEffect)((function(){f.fetchSounds((function(e){return e.map((function(e){return{id:e.id,order:e.order,correct:!1,game:null,loading:!1}})).sort((function(e,n){return e.order-n.order}))}),c)}),[]);var b=function(e,n){var i=Object(s.a)(t),r=i.findIndex((function(n){return n.id===e}));i[r]=Object(u.a)(Object(u.a)({},i[r]),{},{loading:n}),c(i)};return Object(g.jsxs)("article",{className:"App",children:[Object(g.jsx)("header",{className:"Quiz-header",children:"Video Game SFX Quiz"}),Object(g.jsx)(w,{sounds:t,handleCheck:function(e,n){b(e,!0),f.checkAnswer(e,n,(function(n){var i=n.success,r=n.answer;if(i){var o=Object(s.a)(t),a=o.findIndex((function(n){return n.id===e}));o[a]={id:e,correct:!0,game:r.game,loading:!1},c(o)}else b(e,!1)}))},playAudio:h.playAudio}),t.length>0&&Object(g.jsx)(T,{onClick:function(){f.giveUp((function(e){h.playAudio("game-over"),c(t.map((function(n){return Object(u.a)(Object(u.a)({},n),{},{game:(e.find((function(e){return e.id===n.id}))||{}).game})}))),l(!0)}))},isDisabled:a}),Object(g.jsx)(v,{max:t.length,score:t.filter((function(e){return e.correct})).length})]})});t(48);a.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(z,{})}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.fd52f049.chunk.js.map